syntax = "proto2";

package tracking_events;

message BoundingBox {
    // REQUIRED fields must always be present.
    required int32 x = 1;
    required int32 y = 2;
    required int32 width = 3;
    required int32 height = 4;
}

message TrackEvent {
    // Unique ID for the specific tracker
    required int32 tracker_id = 1; 
    
    // The class name string (e.g., "dog")
    required string class_name = 2;
    
    // Smoothed bounding box coordinates from the Kalman Filter
    required BoundingBox box = 3;

    // OPTIONAL fields can be omitted.
    optional int32 class_id = 4;
    optional float confidence = 5;
    optional int64 timestamp_ms = 6;
}

message FrameUpdate {
    // A single frame can have multiple detected objects
    // REPEATED means zero or more instances of TrackEvent
    repeated TrackEvent events = 1;

    // A flag to signal when a high-priority event (like a dog) is active
    // This drives your Go recording logic.
    required bool high_priority_active = 2; 

    // Frame count for debugging/syncing
    optional int32 frame_number = 3;
}